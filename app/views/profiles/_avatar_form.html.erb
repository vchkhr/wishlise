<%= turbo_frame_tag :profile_avatar_form_frame do %>
  <%= simple_form_for profile, url: profile_avatar_path(profile), method: :PATCH, data: { "update-profile-target": "avatarForm" } do |f| %>
    <div class="field mt-3">
      <% unless result.nil? %>
        <% if result == true %>
          <div class="alert alert-success">Profile photo was updated successfully.</div>
        <% elsif result == false %>
          <div class="alert alert-danger">Profile photo was not updated.</div>
        <% else %>
          <div class="alert alert-info"><%= result %></div>
        <% end %>
      <% end %>

      <div class="d-flex">
        <% if profile.avatar.present? %>
          <%= image_tag profile.avatar, class: "avatar" %>
        <% else %>
          <%= image_tag asset_path("avatar.png"), class: "avatar" %>
        <% end %>

        <div class="ms-3 align-self-center">
          <%= f.label :avatar, label: "Profile image" %>
          <%= f.input :avatar, label: false, input_html: { data: { action: "change->update-profile#avatarSubmit", "update-profile-target": "avatarInput" } } %>

          <% if profile.avatar.present? %>
            <%= link_to "Remove profile image", profile_avatar_path(profile), data: { turbo_method: :delete }, class: "text-danger" %>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
<% end %>
