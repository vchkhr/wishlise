<div class="py-5 px-3">
  <h2 class="text-center">Your Wishlists &#10024;</h2>

  <div class="text-center">
    <p>
      <%= link_to "New wishlist", new_wishlist_path %>
    </p>
  </div>

  <div id="wishlists" class="row row-cols-1 row-cols-md-3 g-4">
    <% @wishlists.each do |wishlist| %>
      <div id="<%= dom_id wishlist %>" class="col">
        <div class="card h-100">
          <div class="card-body">
            <h5 class="card-title">
              <%= link_to wishlist.title, wishlist_path(wishlist), class: "stretched-link text-decoration-none" data: { turbo_frame: "_top" } %>
            </h5>

            <div class="d-flex gap-3 overflow-hidden">
              <% wishlist.items.with_image.order(updated_at: :desc).limit(5).each do |item| %>
                <%= image_tag item.image, alt: item.title || item.url, class: "img-thumbnail", width: 75, style: "object-fit: cover" %>
              <% end %>
            </div>

            <p class="card-text">
              <small class="text-muted">
                <% if wishlist.items.empty? %>
                  No items yet.
                <% else %>
                  <%= pluralize(wishlist.items.count, "item") %>
                <% end %>
                <br>
                <i class="fs-75 <%= WishlistsHelper::PUBLICITY_ICONS[wishlist.publicity.to_sym] %>"></i>
                <%= WishlistsHelper::PUBLICITY_TITLES[wishlist.publicity.to_sym] %>.<br>
                Last updated <%= time_ago_in_words(wishlist.updated_at) %> ago.
              </small>
            </p>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
